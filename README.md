# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## В данном проекте выбран паттерн MVP 

- слой данных - храненеие и изменение данных 
- слой представления - вывод данных на страницу
- презентер отвечает за взаимодействие данных и представления src/index.ts

## Диаграмма классов

![alt text](<Диаграмма классов.png>)


## Базовые классы

#  Класс api

Данный класс предназначен для отправки и получения запрососов.

 constructor(baseUrl: string, options: RequestInit = {})

В конструктор передается базовый адрес URL  сервера, по которому будут вешаться запросы и опции для этих запросов 

Поля: 

- baseURL - базовый адрес сервера 
- options - объект с заголовками запроса

Методы:

- handleResponse - принимает ответ от сервера как параметр, и обрабатывает его,возвращая результат в формате json или отклоненный промис с возникшей ошибкой
- _request - выполняет запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер
- get - выполняет GET запрос на переданный в параметрах ендпоинт и возвращает промис который при разрешении содержит объект, которым ответил сервер или ошибку.
- post - принимает объект с данными, которые будут переданы в JSON в теле запроса, и отправляет эти данные на ендпоинт переданный как параметр при вызове метода. По умолчанию выполняется 'POST' запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.


# Класс EventEmitter

В данном классе реализован брокер событий, который реализует паттерн "Наблюдатель" позволяющий отправлять события и подписываться на событиия, происходящие в системе. Класс используется для связи слоя данных и представления. 

constructor() - инициализирует брокер событий

Поля:

_events - Map, состоящий из ивентов и подписчиков
Методы:

on - подписка на событие
off - отписка от события
emit - инициализация события
onAll - подписка одновременно на все события
offAll - сброс ВСЕХ обработчиков
trigger - возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие

# Класс Component<T>

Абстрактный базовый класс, предназначенный для создания компонентов пользовательского интерфейса. Класс предоставляет инструменты для управления DOM элементами и поведением компонента.


Методы:

- toggleClass - переключается класс для переданного элемента
- setText - устанавливает текстовое содержимое для переданного элемента
- setImage - устанавливает изображения и альтернативный текст для изоображения(опционально) для переданного элемента типа HTMLImageElement
- setDisabled - изменяет статус блокировки для переданного элемента
- setHidden, setVisible - скрывает, отображает переданный элемент
- render - рендерит компонент, используя переданные данные. Метод должен быть переназначен в дочерних классах


# Класс View<T>
Базовый класс, расширяющий класс Component, добавляя в него поле events, в которое записывается брокер событий, для их генерации.

constructor(protected readonly events: IEvents, container: HTMLElement) - принимает элемент контейнера, в который будет помещен компонент и брокер событий

Методы: полностью наследуются от класса Component<T>


## Основные интерфейсы / типы

- IProduct интерфейс со всеми свойствами продукта 
- IBasket интерфейс корзины с содержиммым и тотал стоимостью товаров
- IBasketView интерфейс корзины для отображения на странице
- IOrder интерфес заказа для отправки на сервер 
- OrderForm - тип формы заказа 
- IOrderResult - интерфейс результата отправки заказа 

